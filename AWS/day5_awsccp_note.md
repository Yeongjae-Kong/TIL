# AWS CCP 내용 정리 - Cloudfront, EC2, ELB, DB

----------------------------------------

## Cloudfront

CloudFront(CloudFront)는 사용자의 지리적 위치, 웹 페이지의 출처 및 콘텐츠 전송 서버를 기반으로 사용자에게 웹 페이지 및 기타 웹 콘텐츠를 전송하는 분산 서버(네트워크) 시스템입니다.

CloudFront - 핵심 용어:
1. 엣지 로케이션: 콘텐츠가 캐시될 위치입니다. 이것은 AWS 지역/AZ와는 별개입니다.
2. 오리진 - CDN이 배포할 모든 파일의 오리진입니다. S3 버킷, EC2 인스턴스, Elastic Load Balancer 또는 Route 53일 수 있습니다.
3. 분포(Distribution) - Edge 위치 모음으로 구성된 CDN에 지정된 이름입니다.

첫 번째 사용자가 파일을 쿼리할 때 서버에서 파일을 다운로드합니다. 두 번째 사용자는 서버에서 다시 다운로드하는 대신 Edge Location에서 캐시된 복사본을 가져옵니다. 파일의 수명은 보통 48시간으로 정의됩니다.

두 가지 분포 유형:
- 웹 배포 - 일반적으로 웹 사이트에 사용됩니다
- RTMP - 미디어 스트리밍에 사용됨

### CloudFront 시험 팁

1. 가장자리 위치: 콘텐츠가 캐시될 위치입니다. 이것은 AWS 지역/AZ와는 별개입니다.
2. 오리진 - CDN이 배포할 모든 파일의 오리진입니다. S3 버킷, EC2 인스턴스, Elastic Load Balancer 또는 Route 53일 수 있습니다.
3. 분포 - Edge 위치 모음으로 구성된 CDN에 지정된 이름입니다.

- 두 가지 분포 유형:
웹 배포 - 일반적으로 웹 사이트에 사용됩니다
RTMP - 미디어 스트리밍에 사용됨

참고:
1. 엣지 로케이션은 읽기 전용이 아니라 쓸 수도 있습니다. (즉, 오브젝트를 그 위에 놓습니다.).
2. TTL(Time to live)의 수명 동안 객체가 캐시됩니다
3. 캐시된 개체를 지울 수 있지만 요금이 부과됩니다.

## EC2 (Elastic Compute Cloud)

1. Amazon Elastic Compute Cloud(Amazon EC2)는 클라우드의 가상 서버에 불과합니다
2. Amazon EC2는 새 서버 인스턴스를 가져오고 부팅하는 데 필요한 시간을 몇 분으로 줄여 컴퓨팅 요구사항의 변화에 따라 용량을 빠르게 확장할 수 있도록 지원합니다.


### EC2 가격 모델

1. 온디맨드: 약속 없이 시간 단위(또는 초 단위)로 고정 요금을 지불할 수 있습니다.
2. 예약: 용량 예약을 제공하며, 인스턴스에 대한 시간당 요금을 크게 할인합니다. 계약 기간은 1-3년입니다. 선불 및 장기 계약을 통해 더 높은 할인을 받을 수 있습니다.
3. 스팟: 인스턴스 용량에 대해 원하는 가격으로 입찰할 수 있으므로 애플리케이션 시작 시간과 종료 시간이 유연할 경우 훨씬 더 많은 비용을 절감할 수 있습니다.
4. 전용 호스트: 사용자 전용 물리적 EC2 서버. 전용 호스트를 사용하면 기존 서버 기반 소프트웨어 라이센스를 사용할 수 있으므로 비용을 절감할 수 있습니다.


### EC2 시험 팁

1. EC2는 컴퓨팅 기반 서비스입니다. 서버가 없는 것은 아닙니다. 서버입니다!
2. 개인 키를 사용하여 EC2에 연결합니다.
3. 공통 포트: Linux(포트 22), Microsoft - RDP(포트 3389), HTTP(80) 및 HTTPS(443)
4. 보안 그룹은 가상 방화벽입니다. 0.0.0.0/0에 모든 것을 입력합니다. X.X.X.X/32에서 단일 IP 주소 허용(32는 이 IP 주소를 의미)
5. 항상 실패를 위한 설계를 하라. 각 가용성 영역에 하나의 EC2 인스턴스가 있어야 합니다.

* CLI 사용 시 3가지 방법으로 AWS와 상호 작용할 수 있습니다
a. 콘솔 사용
b. CLI(명령줄 인터페이스) 사용
c. SDK 사용하기

* 역할(Roles) 사용 시
1. 역할은 액세스 키 ID 및 비밀 액세스 키를 사용하는 것보다 훨씬 안전하고 관리하기 쉽습니다.
2. 역할에 정책을 즉시 추가/수정합니다. 역할은 언제든지 EC2 인스턴스에 적용할 수 있습니다. 이 작업을 수행하면 변경 내용이 즉시 적용됩니다.
3. 역할은 보편적입니다. 사용자와 유사한 영역을 지정할 필요는 없습니다.

* 웹 서버 구축:

AWS에 로그인 후 아래와 같이 진행

    chmod 400 SriAWS.pem
    
    Public DNS를 사용하여 인스턴스에 연결
    
    c2-100-26-17-63.compute-1.amazonaws.com
    
    (예: ssh -i "SriAWS.pem" ec2-user@ec2-100-26-17-63.compute-1.amazonaws.com)
    
sudo yum install http -y

Setup index.html - Hello, this is web server 1
 
## ELB (EC2 로드 밸런서)

1. 애플리케이션 로드 밸런서(HTTP 및 HTTPS) - 계층 7 인식(지능적인 의사 결정).
2. 네트워크 로드 밸런서(TCP, TLS 및 UDP) - 최고 성능/정적 IP 주소.
3. 클래식 로드 밸런서(HTTP, HTTPS 및 TCP용 이전 세대) - 낮은 비용을 유지하기 위한 테스트 및 개발.

## DB
1. AWS의 관계형 데이터베이스 - RDS:
    1.1 SQL 서버
    1.2 오라클
    1.3 PostgreSQL
    1.4 MySQL
    1.5 Aurora
    1.6 MariaDB

2. 시험 팁: RDS에는 두 가지 기능이 있습니다
    2.1 Multi-AZ - DR용
    2.2 복제본을 통한 성능 향상(5개 복제본 읽기 허용)

3. Dynamo라고 하는 비관계형 데이터베이스(JSON/NoSQL)DB
    3.1 키 값 쌍
    3.2 표의 열은 달라질 수 있으며, 이는 DB의 다른 행에 영향을 미치지 않습니다.

4. OLTP(Online Transaction Processing)는 OLAP(Online Analytics Processing)와 실행할 쿼리 유형이 다릅니다.

5. Redshift라는 AWS 데이터 웨어하우스 데이터베이스는 DB 관점 및 인프라 계층에서 다른 유형의 아키텍처를 사용합니다.

6. ElastiCache는 클라우드에서 메모리 내 캐시로 쉽게 배포, 운영 및 확장할 수 있는 웹 서비스입니다. 이 서비스는 웹 애플리케이션의 성능을 향상시킵니다. 디스크 기반 데이터베이스에 전적으로 의존하는 대신 메모리 내에서 빠르게 관리되는 정보를 검색할 수 있습니다.
ElastiCache는 두 개의 오픈 소스 인메모리 캐싱 엔진을 지원합니다.
    6.1 Memcached
    6.2 레디스

