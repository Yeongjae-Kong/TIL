# AWS CCP 내용 정리 - 클라우드 컴퓨팅, Well-Architected, IAM, S3

----------------------------------------

## 클라우드 컴퓨팅이란?

인터넷을 통한 클라우드 플랫폼을 통해 컴퓨팅, 데이터베이스 스토리지, 애플리케이션 및 기타 IT 리소스를 온디맨드 방식(=수요에 맞춰 서비스 공급)으로 제공. 종량제 요금제 사용

#### 클라우드 컴퓨팅의 6가지 이점

1. 변동비용에 대한 자본비용의 교환
사용한 것에 대해서만 지불
2. 대규모 규모의 경제 효과
그들은 서버, 하드웨어를 구입하기 위해 더 저렴한 가격을 받습니다.
3. 용량에 대한 추측이 필요없음
4. 속도 및 민첩성 향상
웹 사이트/앱은 수요에 따라 무한 확장 가능
5. 데이터 센터 운영/유지 관리 비용 지출 중단
인프라 관리가 아닌 자신이 잘하는 분야에 집중
6. 몇 분 만에 글로벌 전환
몇 분 만에 애플리케이션 구현
최소의 비용으로 짧은 대기 시간과 더 나은 경험 제공

#### 클라우드 컴퓨팅의 3가지 유형

- Infrastructure as a Service (IAAS)
운영 체제뿐만 아니라 서버(물리적 또는 가상)도 관리합니다.
데이터 센터 공급자가 서버에 액세스할 수 없습니다.
- Platform as a Service (PAAS)
기업에서 제공하는 API도 PAAS의 일종입니다.
다른 사용자가 기본 하드웨어 및 운영 체제를 관리합니다. 애플리케이션에만 집중할 수 있습니다.
코드를 업로드하면 실행됩니다.
- Software as a Service (SAAS)
Gmail과 같은 형태로 제공되는 서비스입니다.
애플리케이션과 상호 작용하고, 소프트웨어를 관리하며, 사용 방법을 관리하기만 하면 됩니다.
다른 사람이 인프라와 관련된 모든 것을 관리합니다.

#### 3가지 유형의 클라우드 컴퓨팅 구축

1. 퍼블릭 클라우드 - AWS, Azure, Google 클라우드 플랫폼
2. 하이브리드 - 공용 및 개인 혼합: 중요한 데이터를 사내에 보관하고 싶을 때
3. 프라이빗 클라우드(또는 온프레미스) - 데이터 센터에서 프라이빗 클라우드를 관리합니다. Openstack 또는 VMware 형태입니다.

#### Around the World with AWS

- Region: 2개 이상의 AZ(Availabilty Zone)로 구성된 지리적 영역
- Availability Zone: 데이터 센터
- Edge Location: CloudFront에서 쓰는 CDN Endpoints, region보다 더많은 edge location을 가짐


## 잘 설계된 AWS 프레임워크의 5대 요소

### 1. 운영 효율성

Operational Excellence는 개발을 지원하고 워크로드를 효율적으로 실행하며, 워크로드 운영에 대한 통찰력을 얻고, 비즈니스 가치를 제공하기 위한 지원 프로세스와 절차를 지속적으로 개선할 수 있는 기능을 포함합니다. 구현에 대한 규범적 지침은 Operational Excellence Pillar 백서에서 확인할 수 있습니다.

설계 원리

클라우드의 탁월한 운영을 위한 5가지 설계 원칙이 있습니다:

1. 코드로서의 작업 수행
2. 자주, 작고, 되돌릴 수 있는 변화를 만듭니다
3. 운영 절차를 자주 세분화합니다
4. 실패를 예상합니다
5. 모든 작동 실패로부터 학습

모범 사례

운영 팀은 비즈니스 및 고객의 요구를 이해하여 비즈니스 결과를 지원할 수 있어야 합니다. Ops는 운영 이벤트에 대응하기 위한 절차를 작성 및 사용하고, 비즈니스 요구사항을 지원하기 위해 그 효과를 검증합니다. 또한 Ops는 원하는 비즈니스 성과를 측정하는 데 사용되는 메트릭을 수집합니다.

비즈니스 환경, 비즈니스 우선순위, 고객 요구사항 등 모든 것이 계속해서 변화합니다. 변화에 대응하여 시간이 지남에 따라 진화를 지원하고 성과를 통해 얻은 교훈을 통합할 수 있도록 운영을 설계하는 것이 중요합니다.

### 2. 보안

보안 기둥에는 데이터, 시스템 및 자산을 보호하여 클라우드 기술을 활용하여 보안을 개선할 수 있는 기능이 포함되어 있습니다. 구현에 대한 규범적 지침은 Security Pillar 백서에서 확인할 수 있습니다.

설계 원리

클라우드의 보안을 위한 7가지 설계 원칙이 있습니다:

1. 강력한 정체성 기반 구축
2. 추적 기능 활성화
3. 모든 계층에서 보안 적용
4. 보안 모범 사례 자동화
5. 전송 중 및 미사용 데이터 보호
6. 사용자가 데이터로부터 멀리 떨어져 있어야 합니다
7. 보안 이벤트 준비

모범 사례

워크로드를 설계하기 전에 보안에 영향을 미치는 실무 지침을 마련해야 합니다. 당신은 누가 무엇을 할 수 있는지 통제하고 싶을 것입니다. 또한 데이터 보호를 통해 보안 사고를 식별하고 시스템과 서비스를 보호하며 데이터의 기밀성과 무결성을 유지할 수 있어야 합니다.

보안 사고에 대응하기 위한 프로세스를 잘 정의하고 실천해야 합니다. 이러한 도구와 기술은 재정적 손실을 방지하거나 규제 의무를 준수하는 것과 같은 목표를 지원하기 때문에 중요합니다.

AWS Shared Responsibility Model은 클라우드를 채택하는 조직이 보안 및 규정 준수 목표를 달성할 수 있도록 지원합니다. AWS는 클라우드 서비스를 지원하는 인프라를 물리적으로 보호하기 때문에 AWS 고객은 서비스를 사용하여 목표를 달성하는 데 집중할 수 있습니다. 또한 AWS Cloud는 보안 데이터에 대한 액세스를 강화하고 보안 이벤트에 대응하는 자동화된 접근 방식을 제공합니다.

### 3. 신뢰성

신뢰성 기둥은 워크로드가 의도한 기능을 정확하고 일관되게 수행할 수 있는 능력을 포함합니다. 여기에는 전체 라이프사이클에 걸쳐 워크로드를 운영하고 테스트할 수 있는 기능이 포함됩니다. 구현에 대한 규범적 지침은 안정성 필러 백서에서 확인할 수 있습니다.

설계 원리

클라우드의 안정성을 위한 5가지 설계 원칙이 있습니다:

1. 장애로부터 자동 복구
2. 시험 복구 절차
3. 수평적 확장으로 Aggregate 워크로드 가용성 향상
4. 용량 추측 중지
5. 자동화의 변화 관리

모범 사례

안정성을 확보하려면 서비스 할당량 및 네트워크 토폴로지가 워크로드를 수용하는 환경인 기초부터 시작해야 합니다. 분산 시스템의 워크로드 아키텍처는 장애를 방지하고 완화하도록 설계되어야 합니다. 워크로드는 수요 또는 요구사항의 변화를 처리해야 하며, 장애를 감지하고 자동으로 자체 복구되도록 설계되어야 합니다.

시스템을 설계하기 전에 신뢰성에 영향을 미치는 기본적인 요구사항이 마련되어야 합니다. 예를 들어 데이터 센터에 충분한 네트워크 대역폭이 있어야 합니다. 이러한 요구사항은 단일 프로젝트의 범위를 벗어났기 때문에 무시되기도 합니다.

이러한 무시는 신뢰할 수 있는 시스템을 제공하는 능력에 상당한 영향을 미칠 수 있습니다. 사내 환경에서 이러한 요구사항은 종속성으로 인해 리드 타임이 길어질 수 있으므로 초기 계획 시 통합해야 합니다.

AWS에서는 이러한 기본 요구사항의 대부분이 이미 통합되어 있거나 필요에 따라 해결될 수 있습니다. 클라우드는 기본적으로 무한대로 설계되었으므로 AWS는 충분한 네트워킹 및 컴퓨팅 용량에 대한 요구 사항을 충족하는 동시에 스토리지 디바이스 크기와 같은 리소스 크기 및 할당을 온디맨드로 자유롭게 변경할 수 있습니다.

### 4. 성능 효율성

성능 효율성의 핵심 요소에는 컴퓨팅 리소스를 효율적으로 사용하여 시스템 요구사항을 충족하고 수요 변화와 기술 변화에 따라 이러한 효율성을 유지할 수 있는 기능이 포함됩니다. 성능 효율성 필러 백서에서 구현에 대한 규범적 지침을 찾을 수 있습니다.

설계 원리

클라우드의 성능 효율성을 위한 5가지 설계 원칙이 있습니다:

1. 첨단 기술의 민주화
2. 몇 분 만에 글로벌화
3. 서버리스 아키텍처 사용
4. 더 자주 실험하기
5. 기계적 공감을 고려합니다

모범 사례

고성능 아키텍처를 구축하기 위해 데이터 기반 접근 방식을 채택합니다. 고급 설계에서 리소스 유형의 선택 및 구성에 이르기까지 아키텍처의 모든 측면에 대한 데이터를 수집합니다.

선택 사항을 정기적으로 검토하면 지속적으로 진화하는 AWS 클라우드를 활용할 수 있습니다. 모니터링을 통해 예상 성능에서 벗어나는 사항을 파악할 수 있습니다. 압축 또는 캐슁을 사용하거나 일관성 요구사항을 완화하는 등의 성능 향상을 위해 아키텍처를 수행합니다

특정 워크로드에 대한 최적의 솔루션은 다양하며, 솔루션은 종종 여러 접근 방식을 결합합니다. 잘 설계된 워크로드는 여러 솔루션을 사용하고 다양한 기능을 지원하여 성능을 향상시킵니다

### 5. 비용 최적화

비용 최적화 기둥에는 시스템을 실행하여 최저 가격으로 비즈니스 가치를 제공할 수 있는 기능이 포함되어 있습니다. 구현에 대한 규범적 지침은 비용 최적화 기둥 백서에서 확인할 수 있습니다.

설계 원리

클라우드에서 비용 최적화를 위한 5가지 설계 원칙이 있습니다:

1. 클라우드 재무 관리 구현
2. 소비 모델을 채택합니다
3. 전반적인 효율성 측정
4. 차별화되지 않은 무거운 리프팅에 돈을 쓰는 것을 멈추세요
5. 지출 분석 및 귀속

모범 사례

다른 기둥과 마찬가지로 고려해야 할 절충안이 있습니다. 예를 들어, 출시 기간을 단축할 것인지 아니면 비용을 최적화할 것인지를 선택하십시오? 경우에 따라 초기 비용 최적화에 투자하는 대신 신속하게 출시하거나 새로운 기능을 제공하거나 단순히 마감일을 준수하는 등 속도에 맞게 최적화하는 것이 가장 좋습니다.

설계 결정은 때때로 데이터보다는 성급하게 내리는 경우가 있으며, 가장 비용적으로 최적화된 구축을 위해 벤치마킹하는 데 시간을 소비하기보다는 과도한 보상을 해야 한다는 유혹이 항상 존재합니다. 이로 인해 배포가 과도하게 프로비저닝되고 최적화되지 않을 수 있습니다.

워크로드에 적합한 서비스, 리소스 및 구성을 사용하는 것이 비용 절감의 핵심입니다.

## Identify Access Management(IAM)

보안 상태에서 다섯 개의 mark를 선택합니다.
1. 루트 액세스 키 삭제
새 사용자로서 건너뛸 수 있습니다.
2. MFA(다중 요인 인증) 사용
Google Authenticator를 사용하여 MFA 설정
3. 개별 IAM 사용자 생성
액세스 유형:
- 프로그램 액세스: 명령줄을 통해 액세스
- AWS 관리 콘솔 액세스: AWS 콘솔에 로그인하고 변경합니다.
- AWS SDK 액세스: Software Developer Kit을 통해 액세스
4. IAM 그룹 만들기
액세스 권한을 결정한 후 그룹에 추가해야 합니다.
정책 액세스 유형(또는 여러 유형)을 선택하고 그룹 이름을 추가합니다.
5. IAM 암호 정책
암호 정책은 IAM 사용자가 설정할 수 있는 암호 유형을 정의하는 규칙 집합입니다.
대/소문자 변경, 필요한 수, 최소 비밀번호 길이 등

## policy
= 사용자, 그룹, 역할에 대한 권한 정의 방법
정책을 클릭하여 사용자에게 액세스 권한을 부여하는 항목에 대한 세부 정보를 얻을 수 있습니다.
Detailed JSON을 사용하면 효과(허용, 허용 안 함), 액션(발생할 작업) 및 리소스(대상 리소스)로 구성된 statement를 정의할 수 있습니다.

## ** 중요포인트

AWS 플랫폼에 액세스하는 3가지 방법:
- AWS 콘솔을 통해
- 명령줄을 사용하여 프로그래밍 방식으로
- 소프트웨어 개발 키트(SDK) 사용


Root account
- 전체 관리자 액세스
- 절대 넘기지 말아야 합니다.
- 대신 조직의 각 개인에 대해 사용자를 생성하고 MFA로 루트 계정을 보호합니다.


Group
- 사용자를 저장할 장소
- 사용자가 그룹이 가진 모든 권한을 상속합니다.
- 그룹에 대한 권한을 설정하려면 JSON을 사용하여 해당 그룹에 대한 정책을 설정해야 합니다.


------------------------------------------------------------

## S3 (Simple Storage Service)

- 개발자 및 IT 팀에게 안전하고 내구성이 뛰어나며 확장성이 뛰어난 객체 스토리지 제공
- 파일을 안전하게 저장할 수 있는 장소
- 운영 체제 또는 데이터베이스가 아닌 개체 기반 스토리지(사진, Word 파일, 비디오)
- 파일 크기는 0바이트에서 5TB 사이입니다.
- 스토리지는 무제한이지만 기가바이트 단위로 비용을 지불할 수 있습니다.
- 파일이 버킷에 저장됩니다.
- 버킷이 클라우드의 폴더임
- 버킷은 범용 네임스페이스입니다. 전역적으로 고유해야 합니다.
- URL은 https://s3-eu-west-1.amazonaws.com/acloudguru 처럼 보입니다.
- 지역 + 지역 번호 + amazonaws.com + 버킷 이름
- 파일 업로드에 성공하면 HTTP 200 코드를 받게 됩니다.

#### S3의 데이터 일관성

- 새 개체의 PUT에 대한 쓰기 일관성 후 읽기
업로드하는 즉시 파일을 읽으면 파일을 읽을 수 있습니다.
- PUT 및 DELETE 덮어쓰기에 대한 최종적인 일관성
파일을 업데이트하고 이전 버전을 덮어쓰면 이전 파일 또는 새 파일이 표시될 수 있습니다.
하나의 가용성 영역으로 업데이트 중이거나 다른 가용성 영역으로 전파하는 데 시간이 걸릴 수 있습니다.

#### S3 키-값 저장소

S3는 객체 기반이며 객체는 다음으로 구성됩니다.
- 키(객체 이름, 예: Hello).txt
- 파일의 데이터(바이트 순서)
- 버전 ID(버전 작성에 중요)
- 메타데이터(예: 태그와 같은 데이터에 대한 데이터
- 하위 리소스: 액세스 제어 목록, 토렌트

#### 기타

- 99.99%의 가용성을 보장하는 설계
- Amazon은 99.99999999%(11 x 9s)의 내구성을 보장합니다.
- x개의 파일을 업로드하면 해당 파일의 99.9999999999%가 실제로 업로드됩니다(파일을 잃지 않음).
- 계층형 스토리지 가용성
- 라이프사이클 관리
- 파일이 30일 이상 지난 경우 한 스토리지 계층에서 다른 스토리지 계층으로 이동한 후 최종적으로 Glacier에 보관합니다.
- 버전 관리
- 파일의 여러 버전
- 암호화
- 액세스 제어 목록 및 버킷 정책을 사용하여 데이터 보호
- 버킷 정책:정책은 특정 버킷에 대한 것입니다.
- ACL: 개별 파일 수준, 특정 파일에 액세스할 수 있는 사용자 제어

#### S3 스토리지 Tiers

- S3 표준
99.99% 가용성
99.9999999999% 내구성
여러 장치(여러 Disk) 및 여러 시설(여러 가용성 영역(=AZ))에 걸쳐 중복 저장
2개 시설의 손실을 동시에 견딜 수 있도록 설계됨

- S3 - IA(Infrequently Accessed)
데이터 액세스 빈도가 낮지만 필요할 때 신속하게 액세스해야 함
Standard보다 수수료는 낮지만 검색 수수료가 부과됨

- S3 One Zone - IA
S3 - IA와 동일하지만 다중 가용성 영역 데이터 복원 기능이 필요하지 않음
하나의 가용 영역에만 저장

- Glacier
보관용으로만 사용됨
가장 쌈
신속, 표준 또는 대량
신속:몇 분 이내에 복구, 높은 비용 발생
표준: 복구에 3-5시간 소요
부피: 5-12시간

Standard를 제외한 나머지 3개에 대해서만 검색 비용 부과

#### Charged for

- Storage
- Requests
- Storage management pricing
Tags that define who owns an object
- Data transfer pricing
다른 region으로 이동
- Transfer acceleration
장거리에서 빠르고 쉽고 안전하게 전송


### S3 버킷 생성

- 버킷에는 고유한 이름이 있어야 합니다.
- S3용 인터페이스는 글로벌(IAM과 유사)이지만 생성된 버킷은 모든 영역에 배포할 수 있습니다.
- 버킷 이름은 DNS 규정을 준수해야 합니다(3-63자, 잘못된 문자 없음).
- 기본적으로 버킷은 비공개(권장)입니다.
- 추가 메뉴를 사용하여 스토리지 클래스 및 암호화를 즉시 변경할 수 있습니다.

#### 공용 액세스 설정

- 공용 읽기 액세스를 사용할 수 없기 때문에 URL을 통해 파일을 열려고 하면 기본적으로 작동하지 않습니다.업로드할 때 활성화해야 합니다.
- 파일 옆 클릭박스 > 추가 > 공개
- 다른 방법: 파일 클릭 > 권한 탭 > 모두(공개 접근 중) > 개체 읽기

#### 전송 가속

1. 버킷의 속성 클릭
2. 고급 설정 > 전송 가속 > 활성화
- S3에는 전 세계 다른 지역으로의 전송 속도를 테스트할 수 있는 기능이 있습니다.

#### region간 복제

- 관리 > 복제
- 한 지역의 버킷을 세계의 다른 지역의 버킷으로 복제할 수 있습니다.
- 재해 복구에 유용함
- 첫 번째 버킷에 대한 모든 개체 업로드가 두 번째 버킷에 자동으로 복제됩니다.

#### 웹 페이지용 S3

- S3는 정적 웹 페이지를 호스팅할 수 있습니다(워드프레스나 PHP처럼 동적이지 않음).
- 수요에 따라 자동으로 확장됩니다. 많은 수의 요청에 유용합니다.
- 버킷 정책을 사용하여 전체 버킷을 공개할 수 있습니다(고정 웹 사이트에 사용).


### S3 시험 팁

1. S3는 객체 기반입니다. 즉, 파일을 업로드할 수 있습니다.
2. 파일은 0바이트에서 5TB까지 가능합니다.
3. 저장 공간은 무제한입니다.
4. 파일은 버킷에 저장됩니다.
5. S3는 범용 네임스페이스입니다. 즉, 이름은 전역적으로 고유해야 합니다.
6. S3는 객체 기반(블록 스토리지 아님 - EBS)이므로 운영체제 설치에 적합하지 않으며, 파일 저장에만 사용할 수 있습니다
7. 업로드에 성공하면 HTTP 200 상태 코드가 생성됩니다.
8. 실수로 삭제되지 않도록 MFA delete를 설정할 수 있습니다.
9. S3의 주요 기본 사항은 다음과 같습니다:
- 키(단순히 개체의 이름입니다
- 값(이것은 단순히 데이터이며 일련의 바이트로 구성됨).
10. S3 모델:
- 새 개체의 PUTS에 대한 쓰기 일관성 이후 읽기(새 파일을 쓰고 바로 읽으면 데이터를 볼 수 있음)
- 덮어쓰기 PUT 및 DELETE에 대한 궁극적인 일관성(전파하는 데 시간이 걸릴 수 있음)(기존 파일을 업데이트하거나 파일을 삭제하고 즉시 읽는 경우 이전 버전을 얻을 수도 있고 그렇지 않을 수도 있습니다. 기본적으로 개체에 대한 변경 사항은 전파하는 데 약간의 시간이 걸릴 수 있습니다.)
11. S3 스토리지 클래스 종류
    1. S3 표준: 가용성 99.99%, 내구성 99.999999%를 여러 시설에서 중복 저장하며, 2개 시설의 손실을 동시에 유지하도록 설계되었습니다.
    2. S3 - IA(Infully Access): 99.9% 가용성, 액세스 빈도는 낮지만 필요할 때 신속한 액세스가 필요한 데이터의 경우. S3보다 수수료는 낮지만, 회수 수수료가 부과됩니다.
    3. S3 - 지능형 계층화: 99.9% 가용성, 성능에 영향이나 운영 오버헤드 없이 가장 비용 효율적인 액세스 계층으로 데이터를 자동 이동하여 비용을 최적화하도록 설계되었습니다.
    4. S3 One Zone IA(S3 RRS라고도 함): 99.5% 가용성. 자주 액세스하지 않는 데이터에 대해 경제적인 옵션을 제공하지만 다중 가용성 영역 데이터 복원 기능이 필요하지 않은 경우.
    5. S3 Glacier: S3 Glacier는 데이터 아카이빙을 위한 안전하고, 내구성이 뛰어나며, 경제적인 스토리지 클래스입니다. 사내 솔루션보다 경쟁력이 있거나 저렴한 비용으로 모든 양의 데이터를 안정적으로 저장할 수 있습니다. 검색 시간은 분에서 시간으로 구성할 수 있습니다.
    6. S3 Glacier Deep Archive: S3 Glacier Deep Archive는 12시간의 검색 시간이 허용되는 Amazon의 가장 저렴한 스토리지 클래스입니다.
    7. S3 데이터 상주 요구사항을 충족하는 사내 객체 스토리지용 아웃포스트

### S3 bucket 시험 팁

12. 버킷 이름은 공용 이름 공간을 공유하므로 다른 이름과 동일한 버킷 이름을 가질 수 없습니다.
13. 버킷을 볼 때 버킷을 전체적으로 볼 수 있지만 개별 영역에 버킷이 있을 수 있습니다
14. 지역 간 복제를 사용하여 버킷을 다른 지역에 자동으로 복제할 수 있습니다.
15. 스토리지 클래스 및 암호화를 즉시 변경할 수 있습니다.
16. 이송 가속도
17. 버킷 액세스 제한:
1. 버킷 정책 - 버킷 전체에 적용됩니다.
2. 개체 정책 - 개별 파일에 적용됩니다.
3. 사용자 및 그룹에 대한 IAM 정책 - 사용자 및 그룹에 적용됩니다.
18. 기본적으로 버킷은 공용이 아닙니다.
19. 버킷 정책을 사용하여 전체 S3 버킷을 공용으로 만들 수 있습니다.
20. S3 버킷을 사용하여 정적 웹 사이트를 호스팅할 수 있지만 동적 웹 사이트나 데이터베이스가 필요한 웹 사이트(예: Wordpress...)를 호스팅할 수 없습니다.